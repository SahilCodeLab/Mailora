<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Mailora - Write Professional Emails</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2B3A67",
                        "secondary": "#4682B4",
                        "background-light": "#F8F9FA",
                        "background-dark": "#101c22",
                        "text-light": "#333333",
                        "text-dark": "#F8F9FA",
                        "border-light": "#E0E0E0",
                        "border-dark": "#3a4a52",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    }
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }
        .toast.show {
            opacity: 1;
        }
        .toast.error {
            background-color: #f44336;
        }
        .toast.warning {
            background-color: #ff9800;
        }
    </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
    <div class="relative flex min-h-screen w-full flex-col">
        <header class="sticky top-0 z-50 flex items-center justify-center border-b border-solid border-border-light dark:border-border-dark bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm">
            <div class="flex w-full max-w-6xl items-center justify-between whitespace-nowrap px-4 py-3">
                <div class="flex items-center gap-4">
                    <div class="size-6 text-primary">
                        <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 class="text-lg font-bold leading-tight tracking-[-0.015em] text-[#000] dark:text-[#fff]">Mailora</h2>
                </div>
                <div class="hidden items-center gap-9 md:flex">
                    <a class="text-sm font-medium leading-normal text-text-light dark:text-text-dark hover:text-primary" href="#">About</a>
                    <a class="text-sm font-medium leading-normal text-text-light dark:text-text-dark hover:text-primary" href="#">Pricing</a>
                    <a class="text-sm font-medium leading-normal text-text-light dark:text-text-dark hover:text-primary" href="#">Contact</a>
                </div>
                <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:opacity-90">
                    <span class="truncate">Sign In</span>
                </button>
            </div>
        </header>
        <main class="flex w-full grow flex-col items-center px-4 py-16 sm:py-24">
            <div class="flex w-full max-w-6xl flex-col items-center gap-16">
                <section class="flex w-full flex-col items-center justify-center gap-6 text-center">
                    <div class="flex flex-col gap-2">
                        <h1 class="text-4xl font-black leading-tight tracking-[-0.033em] md:text-5xl text-[#000] dark:text-[#fff]">Write emails that sound real.</h1>
                        <h2 class="max-w-2xl text-base font-normal leading-normal text-text-light dark:text-text-dark/80">Mailora humanizes AI-generated content to create authentic, engaging, and effective communication.</h2>
                    </div>
                    <div class="flex w-full max-w-xl flex-col items-center gap-2 sm:flex-row">
                        <input id="hero-input" class="form-input h-14 flex-1 rounded-lg border border-border-light bg-background-light dark:border-border-dark dark:bg-background-dark/50 text-base font-normal leading-normal placeholder:text-text-light/50 dark:placeholder:text-text-dark/50 focus:border-primary focus:ring-primary/50" placeholder="Describe your email purpose…" value=""/>
                        <button id="hero-generate" class="flex w-full min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-14 px-5 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] sm:w-auto hover:opacity-90">
                            <span class="truncate">Generate Email</span>
                        </button>
                    </div>
                </section>

                <section class="grid w-full grid-cols-1 gap-8 md:grid-cols-2">
                    <div class="flex flex-col gap-4 rounded-xl border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark/30 p-6">
                        <h2 class="text-xl font-bold leading-tight tracking-[-0.015em] text-[#000] dark:text-[#fff]">Craft Your Email</h2>
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <label class="flex flex-col gap-2 sm:col-span-1">
                                <p class="text-sm font-medium leading-normal">Recipient Name</p>
                                <input id="recipient-name" class="form-input h-12 flex-1 rounded-lg border border-border-light bg-background-light dark:border-border-dark dark:bg-background-dark/50 p-3 text-base font-normal leading-normal placeholder:text-text-light/50 dark:placeholder:text-text-dark/50 focus:border-primary focus:ring-primary/50" placeholder="Enter recipient's name" value=""/>
                            </label>
                            <label class="flex flex-col gap-2 sm:col-span-1">
                                <p class="text-sm font-medium leading-normal">Email Subject or Purpose</p>
                                <input id="email-subject" class="form-input h-12 flex-1 rounded-lg border border-border-light bg-background-light dark:border-border-dark dark:bg-background-dark/50 p-3 text-base font-normal leading-normal placeholder:text-text-light/50 dark:placeholder:text-text-dark/50 focus:border-primary focus:ring-primary/50" placeholder="e.g., Follow up on our meeting" value=""/>
                            </label>
                            <label class="flex flex-col gap-2 sm:col-span-1">
                                <p class="text-sm font-medium leading-normal">Language</p>
                                <select id="email-language" class="form-select h-12 flex-1 appearance-none rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark/50 p-3 text-base font-normal leading-normal focus:border-primary focus:ring-primary/50">
                                    <option value="en">English</option>
                                    <option value="hi">Hindi</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                    <option value="de">German</option>
                                </select>
                            </label>
                            <label class="flex flex-col gap-2 sm:col-span-1">
                                <p class="text-sm font-medium leading-normal">Tone</p>
                                <select id="email-tone" class="form-select h-12 flex-1 appearance-none rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark/50 p-3 text-base font-normal leading-normal focus:border-primary focus:ring-primary/50">
                                    <option value="Professional">Professional</option>
                                    <option value="Casual">Casual</option>
                                    <option value="Friendly">Friendly</option>
                                    <option value="Formal">Formal</option>
                                    <option value="Enthusiastic">Enthusiastic</option>
                                </select>
                            </label>
                            <label class="flex flex-col gap-2 sm:col-span-2">
                                <p class="text-sm font-medium leading-normal">Personal Note (optional)</p>
                                <textarea id="personal-note" class="form-textarea min-h-[120px] flex-1 resize-none rounded-lg border border-border-light bg-background-light dark:border-border-dark dark:bg-background-dark/50 p-3 text-base font-normal leading-normal placeholder:text-text-light/50 dark:placeholder:text-text-dark/50 focus:border-primary focus:ring-primary/50" placeholder="Add any specific details or context here..."></textarea>
                            </label>
                            <div class="flex flex-col gap-2 sm:col-span-2">
                                <p class="text-sm font-medium leading-normal">Length</p>
                                <div class="flex w-full rounded-lg border border-border-light dark:border-border-dark p-1">
                                    <button id="length-short" class="length-btn flex-1 rounded-md py-2 text-sm font-semibold text-text-light dark:text-text-dark/80 bg-background-light dark:bg-background-dark/20 hover:bg-gray-100 dark:hover:bg-background-dark/40" data-length="short">Short</button>
                                    <button id="length-medium" class="length-btn flex-1 rounded-md py-2 text-sm font-semibold text-white bg-secondary" data-length="medium">Medium</button>
                                    <button id="length-long" class="length-btn flex-1 rounded-md py-2 text-sm font-semibold text-text-light dark:text-text-dark/80 bg-background-light dark:bg-background-dark/20 hover:bg-gray-100 dark:hover:bg-background-dark/40" data-length="long">Long</button>
                                </div>
                            </div>
                        </div>
                        <button id="humanize-btn" class="mt-4 flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-secondary text-white text-base font-bold leading-normal tracking-[0.015em] hover:opacity-90">
                            <span class="truncate">Generate Email</span>
                        </button>
                    </div>

                    <div class="flex flex-col gap-4 rounded-xl border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark/30 p-6">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold leading-tight tracking-[-0.015em] text-[#000] dark:text-[#fff]">Your Generated Email</h2>
                            <div class="flex items-center gap-2">
                                <button id="copy-btn" class="flex size-9 items-center justify-center rounded-lg hover:bg-gray-100 dark:hover:bg-background-dark/80">
                                    <span class="material-symbols-outlined text-xl text-text-light dark:text-text-dark/80">content_copy</span>
                                </button>
                                <button id="refresh-btn" class="flex size-9 items-center justify-center rounded-lg hover:bg-gray-100 dark:hover:bg-background-dark/80">
                                    <span class="material-symbols-outlined text-xl text-text-light dark:text-text-dark/80">refresh</span>
                                </button>
                                <button id="download-btn" class="flex size-9 items-center justify-center rounded-lg hover:bg-gray-100 dark:hover:bg-background-dark/80">
                                    <span class="material-symbols-outlined text-xl text-text-light dark:text-text-dark/80">download</span>
                                </button>
                            </div>
                        </div>
                        <div id="email-output" class="prose prose-sm dark:prose-invert min-h-[300px] flex-1 rounded-lg border border-border-light bg-background-light dark:border-border-dark dark:bg-background-dark/50 p-4 leading-relaxed">
                            <p>Your generated email will appear here...</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        <footer class="flex w-full justify-center border-t border-solid border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark/30">
            <div class="flex w-full max-w-6xl flex-col items-center justify-between gap-4 px-4 py-6 text-sm text-text-light dark:text-text-dark/80 sm:flex-row">
                <p>© 2024 Mailora. All rights reserved.</p>
                <div class="flex items-center gap-4">
                    <a class="hover:text-primary" href="#">
                        <svg aria-hidden="true" class="h-5 w-5" fill="currentColor" viewbox="0 0 24 24">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path>
                        </svg>
                    </a>
                    <a class="hover:text-primary" href="#">
                        <svg aria-hidden="true" class="h-5 w-5" fill="currentColor" viewbox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.295 1.634 4.208 3.803 4.649-.6.164-1.213.2-1.85.071.609 1.923 2.384 3.32 4.491 3.359-2.013 1.564-4.545 2.44-7.24 2.05 2.089 1.342 4.584 2.121 7.24 2.121 8.812 0 13.635-7.497 13.25-13.999.93-.672 1.748-1.512 2.4-2.487z"></path>
                        </svg>
                    </a>
                </div>
                <p>Built by Sahil</p>
            </div>
        </footer>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        const CONFIG = {
            API_BASE_URL: 'https://your-render-app.onrender.com',
        };

        class EmailGenerator {
            constructor() {
                this.currentLength = 'medium';
                this.initEventListeners();
            }

            initEventListeners() {
                document.getElementById('hero-generate').addEventListener('click', () => {
                    const purpose = document.getElementById('hero-input').value;
                    if (purpose) {
                        document.getElementById('email-subject').value = purpose;
                        this.generateEmail();
                    } else {
                        this.showToast('Please enter an email purpose', 'error');
                    }
                });

                document.getElementById('humanize-btn').addEventListener('click', () => {
                    this.generateEmail();
                });

                document.querySelectorAll('.length-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setLength(e.target.dataset.length);
                    });
                });

                document.getElementById('copy-btn').addEventListener('click', () => {
                    this.copyToClipboard();
                });

                document.getElementById('refresh-btn').addEventListener('click', () => {
                    this.generateEmail();
                });

                document.getElementById('download-btn').addEventListener('click', () => {
                    this.downloadEmail();
                });

                document.getElementById('hero-input').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        document.getElementById('hero-generate').click();
                    }
                });
            }

            setLength(length) {
                this.currentLength = length;
                document.querySelectorAll('.length-btn').forEach(btn => {
                    if (btn.dataset.length === length) {
                        btn.classList.remove('text-text-light', 'dark:text-text-dark/80', 'bg-background-light', 'dark:bg-background-dark/20');
                        btn.classList.add('text-white', 'bg-secondary');
                    } else {
                        btn.classList.remove('text-white', 'bg-secondary');
                        btn.classList.add('text-text-light', 'dark:text-text-dark/80', 'bg-background-light', 'dark:bg-background-dark/20');
                    }
                });
            }

            async generateEmail() {
                const recipientName = document.getElementById('recipient-name').value || '[Recipient Name]';
                const subject = document.getElementById('email-subject').value;
                const tone = document.getElementById('email-tone').value;
                const personalNote = document.getElementById('personal-note').value;
                const language = document.getElementById('email-language').value;
                
                if (!subject) {
                    this.showToast('Please enter an email subject', 'error');
                    return;
                }

                const humanizeBtn = document.getElementById('humanize-btn');
                const originalText = humanizeBtn.querySelector('span').textContent;
                humanizeBtn.querySelector('span').innerHTML = '<div class="loading"></div>';
                humanizeBtn.disabled = true;

                try {
                    const response = await fetch(`${CONFIG.API_BASE_URL}/generate-email`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            recipientName,
                            subject,
                            tone,
                            personalNote,
                            length: this.currentLength,
                            language
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        this.displayEmail(data.email);
                        this.showToast('Email generated successfully!', 'success');
                    } else {
                        throw new Error(data.error || 'Failed to generate email');
                    }

                } catch (error) {
                    console.error('Error:', error);
                    this.showToast('Failed to generate email. Using fallback.', 'error');
                    const fallbackContent = this.createFallbackEmail(recipientName, subject, tone, personalNote, language);
                    this.displayEmail(fallbackContent);
                } finally {
                    humanizeBtn.querySelector('span').textContent = originalText;
                    humanizeBtn.disabled = false;
                }
            }

            createFallbackEmail(recipientName, subject, tone, personalNote, language) {
                const templates = {
                    'en': `Subject: ${subject}\n\nDear ${recipientName},\n\nI hope this email finds you well.\n\n${personalNote ? personalNote + '\n\n' : ''}Thank you for your time and consideration.\n\nBest regards,\n[Your Name]`,
                    'hi': `विषय: ${subject}\n\nप्रिय ${recipientName},\n\nमुझे आशा है कि यह ईमेल आपको अच्छी तरह मिलेगा।\n\n${personalNote ? personalNote + '\n\n' : ''}आपके समय और विचार के लिए धन्यवाद।\n\nसादर,\n[आपका नाम]`
                };
                return templates[language] || templates['en'];
            }

            displayEmail(content) {
                const emailOutput = document.getElementById('email-output');
                const htmlContent = content.replace(/\n/g, '<br>');
                emailOutput.innerHTML = htmlContent;
            }

            copyToClipboard() {
                const emailContent = document.getElementById('email-output').textContent;
                navigator.clipboard.writeText(emailContent).then(() => {
                    this.showToast('Email copied to clipboard!', 'success');
                }).catch(err => {
                    this.showToast('Failed to copy email', 'error');
                });
            }

            downloadEmail() {
                const emailContent = document.getElementById('email-output').textContent;
                const subject = document.getElementById('email-subject').value || 'Generated Email';
                const blob = new Blob([emailContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${subject.replace(/\s+/g, '_')}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                this.showToast('Email downloaded!', 'success');
            }

            showToast(message, type = 'success') {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = 'toast';
                if (type === 'error') toast.classList.add('error');
                else if (type === 'warning') toast.classList.add('warning');
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new EmailGenerator();
        });
    </script>
</body>
</html>
